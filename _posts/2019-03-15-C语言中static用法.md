---
layout:		post
title:		C中static的用法
subtitle:	C语言笔记
author:		Lai
date:		2019-4-3
catalog:	true
tag:
    - C
---

####一、用于链接

> C 变量有 3 种链接属性：外部链接、内部链接 或无链接。具有块作用域、函数作用域或函数原型作用域的变量都是无链接 变量。这意味着这些变量属于定义它们的块、函数或原型私有。具有文件作 用域的变量可以是外部链接或内部链接。外部链接变量可以在多文件程序中 使用，内部链接变量只能在一个翻译单元中使用。

使用static关键字表示内部链接

``` c
int giants = 5;				//文件作用域，外部链接
static int dodgers = 3;		//文件作用域，内部链接
int main() {

	return 0;
}
```

####二、存储期

> 如果对象具有静态存储期，那么它在程序的执行期间一直存在。文件作 用域变量具有静态存储期。注意，对于文件作用域变量，关键字 static表明 了其链接属性，而非存储期。以static声明的文件作用域变量具有内部链 接。但是无论是内部链接还是外部链接，所有的文件作用域变量都具有静态 存储期。

块作用域要有静态存储期，要把变量声明在块中，并加上关键字static
 
``` c
void more(int number) {
	int index;
	static int ct = 0;		
	/*
	变量ct储存在静态内存中，它从程序被载入到程序结束期间都存
	在。但是，它的作用域定义在more()函数块中。只有在执行该函
	数时，程序才能使用ct访问它所指定的对象（但是，该函数可以
	给其他函数提供该存储区的地址以便间接访问该对象，例如通过
	指针形参或返回值）。
	 */
	return 0;
}
```





--------
***内容参考自《C primer plus》***